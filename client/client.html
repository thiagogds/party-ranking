<head><title>Party Ranking</title></head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <ul class="nav">
                <li class="brand"><h1>Party Ranking</h1></li>
                <li style="padding: 10px 20px 0 0 ">{{> search }}</li>
                <li style="padding: 25px 15px 0 0 ">{{> loadingEvent }}</li>
                <li class="brand" style="padding-top: 25px">{{loginButtons}}</li>
            </ul>
        </div>
    </div>
    <div style="margin-left: 0px;margin-right: 0px;margin-top: 40px; margin-bottom: 0px;">
      {{#if currentUser}}
          {{> list}}
      {{/if}}
    </div>
</body>

<template name="loadingEvent">
{{#if currentUser }}
    {{#if isLoading}}
        <img src="ajax-loader.gif"/>
    {{/if}}
{{/if}}
</template>

<template name="search">
    {{#if currentUser}}
        <form class="form-search" style="padding-top: 15px">
            <div class="input-append">
                <input id="event" type="text" class="span2 search-query" placeholder="Evento">
                <button id="send" class="btn" style="padding-right: 20px">Ver</button>
            </div>
        </form>
    {{/if}}
</template>

<template name="female">
    {{#if femaleAttendings}}
    <ul class="thumbnails">
        {{#each femaleAttendings }}
            {{> person }}
        {{/each}}
    </ul>
    {{/if}}
</template>

<template name="male">
    {{#if maleAttendings}}
    <ul class="row thumbnails">
        {{#each maleAttendings }}
            {{> person }}
        {{/each}}
    </ul>
    {{/if}}
</template>

<template name="person">
<li class="span2">
    <div class="thumbnail">
        <a href="{{ link }}" target="_blank">
            <img src="https://graph.facebook.com/{{id}}/picture/?type=large&height=200" style="height: 200px;" data-src="holder.js/300x200">
        </a>
        <div class="caption">
            <h3>{{ name }}</h3>
            <p>{{ votes }}</p>
            <p><button class="vote btn btn-success" user="{{ id }}">+1</button></p>
        </div>
    </div>
</li>
</template>

<template name="list">
    {{#if currentUser }}
      {{#if females }}
          <header id="overview" class="jumbotron subhead" style="padding-top: 31px">
              <div class="container">
                  <a href="http://www.facebook.com/events/{{event.id}}" target="_blank"><h2>Name: {{event.name}}</h2></a>
                  <p class="lead">Ladies: {{females}}</p>
                  <p class="lead">Gentlemen: {{males}}</p>
              </div>
          </header>
      <div class="tabbable">
          <ul class="nav nav-tabs">
              <li class="active">
                  <a href="#female" data-toggle="tab">Ladies</a>
              </li>
              <li>
                  <a href="#male" data-toggle="tab">Gentlemen</a>
              </li>
          </ul>
          <div class="tab-content">
              <div class="tab-pane active" id="female">
                  <div class="row-fluid">
                      {{> female }}
                  </div>
              </div>
              <div class="tab-pane" id="male">
                  <div class="row-fluid">
                      {{> male }}
                  </div>
              </div>
          </div>
      </div>
      {{/if}}
    {{/if}}
</template>
